(()=>{var bt=Object.create;var ee=Object.defineProperty,ht=Object.defineProperties,yt=Object.getOwnPropertyDescriptor,xt=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertyNames,Me=Object.getOwnPropertySymbols,gt=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Fe=(e,o,r)=>o in e?ee(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,Ge=(e,o)=>{for(var r in o||(o={}))Ue.call(o,r)&&Fe(e,r,o[r]);if(Me)for(var r of Me(o))St.call(o,r)&&Fe(e,r,o[r]);return e},Ve=(e,o)=>ht(e,xt(o)),wt=e=>ee(e,"__esModule",{value:!0});var Ot=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var Et=(e,o,r,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of _t(o))!Ue.call(e,n)&&(r||n!=="default")&&ee(e,n,{get:()=>o[n],enumerable:!(t=yt(o,n))||t.enumerable});return e},Tt=(e,o)=>Et(wt(ee(e!=null?bt(gt(e)):{},"default",!o&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var cr=Ot((Qt,oe)=>{var ze,qe,Be,Ye,He,Ke,Je,Xe,Ze,re,Te,$e,Qe,er,V,rr,tr,or,nr,ir,ar,ur,sr,te;(function(e){var o=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(t){e(r(o,r(t)))}):typeof oe=="object"&&typeof oe.exports=="object"?e(r(o,r(oe.exports))):e(r(o));function r(t,n){return t!==o&&(typeof Object.create=="function"?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(i,a){return t[i]=n?n(i,a):a}}})(function(e){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])};ze=function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");o(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},qe=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Be=function(t,n){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(i[a[s]]=t[a[s]]);return i},Ye=function(t,n,i,a){var s=arguments.length,u=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(t,n,i,a);else for(var p=t.length-1;p>=0;p--)(c=t[p])&&(u=(s<3?c(u):s>3?c(n,i,u):c(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u},He=function(t,n){return function(i,a){n(i,a,t)}},Ke=function(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)},Je=function(t,n,i,a){function s(u){return u instanceof i?u:new i(function(c){c(u)})}return new(i||(i=Promise))(function(u,c){function p(v){try{f(a.next(v))}catch(g){c(g)}}function d(v){try{f(a.throw(v))}catch(g){c(g)}}function f(v){v.done?u(v.value):s(v.value).then(p,d)}f((a=a.apply(t,n||[])).next())})},Xe=function(t,n){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,s,u,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(f){return function(v){return d([f,v])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(u=f[0]&2?s.return:f[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,f[1])).done)return u;switch(s=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return i.label++,{value:f[1],done:!1};case 5:i.label++,s=f[1],f=[0];continue;case 7:f=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){i=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){i.label=f[1];break}if(f[0]===6&&i.label<u[1]){i.label=u[1],u=f;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(f);break}u[2]&&i.ops.pop(),i.trys.pop();continue}f=n.call(t,i)}catch(v){f=[6,v],s=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Ze=function(t,n){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&te(n,t,i)},te=Object.create?function(t,n,i,a){a===void 0&&(a=i),Object.defineProperty(t,a,{enumerable:!0,get:function(){return n[i]}})}:function(t,n,i,a){a===void 0&&(a=i),t[a]=n[i]},re=function(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],a=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Te=function(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var a=i.call(t),s,u=[],c;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)u.push(s.value)}catch(p){c={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(c)throw c.error}}return u},$e=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Te(arguments[n]));return t},Qe=function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var a=Array(t),s=0,n=0;n<i;n++)for(var u=arguments[n],c=0,p=u.length;c<p;c++,s++)a[s]=u[c];return a},er=function(t,n,i){if(i||arguments.length===2)for(var a=0,s=n.length,u;a<s;a++)(u||!(a in n))&&(u||(u=Array.prototype.slice.call(n,0,a)),u[a]=n[a]);return t.concat(u||Array.prototype.slice.call(n))},V=function(t){return this instanceof V?(this.v=t,this):new V(t)},rr=function(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(t,n||[]),s,u=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(l){a[l]&&(s[l]=function(S){return new Promise(function(T,G){u.push([l,S,T,G])>1||p(l,S)})})}function p(l,S){try{d(a[l](S))}catch(T){g(u[0][3],T)}}function d(l){l.value instanceof V?Promise.resolve(l.value.v).then(f,v):g(u[0][2],l)}function f(l){p("next",l)}function v(l){p("throw",l)}function g(l,S){l(S),u.shift(),u.length&&p(u[0][0],u[0][1])}},tr=function(t){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,u){n[s]=t[s]?function(c){return(i=!i)?{value:V(t[s](c)),done:s==="return"}:u?u(c):c}:u}},or=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof re=="function"?re(t):t[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(u){i[u]=t[u]&&function(c){return new Promise(function(p,d){c=t[u](c),s(p,d,c.done,c.value)})}}function s(u,c,p,d){Promise.resolve(d).then(function(f){u({value:f,done:p})},c)}},nr=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t};var r=Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n};ir=function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var i in t)i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)&&te(n,t,i);return r(n,t),n},ar=function(t){return t&&t.__esModule?t:{default:t}},ur=function(t,n,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!a:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(t):a?a.value:n.get(t)},sr=function(t,n,i,a,s){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!s:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?s.call(t,i):s?s.value=i:n.set(t,i),i},e("__extends",ze),e("__assign",qe),e("__rest",Be),e("__decorate",Ye),e("__param",He),e("__metadata",Ke),e("__awaiter",Je),e("__generator",Xe),e("__exportStar",Ze),e("__createBinding",te),e("__values",re),e("__read",Te),e("__spread",$e),e("__spreadArrays",Qe),e("__spreadArray",er),e("__await",V),e("__asyncGenerator",rr),e("__asyncDelegator",tr),e("__asyncValues",or),e("__makeTemplateObject",nr),e("__importStar",ir),e("__importDefault",ar),e("__classPrivateFieldGet",ur),e("__classPrivateFieldSet",sr)})});var fr=Tt(cr(),1),{__extends:O,__assign:pr,__rest:eo,__decorate:ro,__param:to,__metadata:oo,__awaiter:lr,__generator:ne,__exportStar:no,__createBinding:io,__values:N,__read:P,__spread:ao,__spreadArrays:uo,__spreadArray:R,__await:ie,__asyncGenerator:mr,__asyncDelegator:so,__asyncValues:dr,__makeTemplateObject:co,__importStar:fo,__importDefault:po,__classPrivateFieldGet:lo,__classPrivateFieldSet:mo}=fr.default;function m(e){return typeof e=="function"}function ae(e){var o=function(t){Error.call(t),t.stack=new Error().stack},r=e(o);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var ue=ae(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function $(e,o){if(e){var r=e.indexOf(o);0<=r&&e.splice(r,1)}}var L=function(){function e(o){this.initialTeardown=o,this.closed=!1,this._parentage=null,this._teardowns=null}return e.prototype.unsubscribe=function(){var o,r,t,n,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=N(a),u=s.next();!u.done;u=s.next()){var c=u.value;c.remove(this)}}catch(l){o={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}else a.remove(this);var p=this.initialTeardown;if(m(p))try{p()}catch(l){i=l instanceof ue?l.errors:[l]}var d=this._teardowns;if(d){this._teardowns=null;try{for(var f=N(d),v=f.next();!v.done;v=f.next()){var g=v.value;try{vr(g)}catch(l){i=i!=null?i:[],l instanceof ue?i=R(R([],P(i)),P(l.errors)):i.push(l)}}}catch(l){t={error:l}}finally{try{v&&!v.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}}if(i)throw new ue(i)}},e.prototype.add=function(o){var r;if(o&&o!==this)if(this.closed)vr(o);else{if(o instanceof e){if(o.closed||o._hasParent(this))return;o._addParent(this)}(this._teardowns=(r=this._teardowns)!==null&&r!==void 0?r:[]).push(o)}},e.prototype._hasParent=function(o){var r=this._parentage;return r===o||Array.isArray(r)&&r.includes(o)},e.prototype._addParent=function(o){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(o),r):r?[r,o]:o},e.prototype._removeParent=function(o){var r=this._parentage;r===o?this._parentage=null:Array.isArray(r)&&$(r,o)},e.prototype.remove=function(o){var r=this._teardowns;r&&$(r,o),o instanceof e&&o._removeParent(this)},e.EMPTY=function(){var o=new e;return o.closed=!0,o}(),e}();var Ae=L.EMPTY;function se(e){return e instanceof L||e&&"closed"in e&&m(e.remove)&&m(e.add)&&m(e.unsubscribe)}function vr(e){m(e)?e():e.unsubscribe()}var A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var z={setTimeout:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var r=z.delegate;return((r==null?void 0:r.setTimeout)||setTimeout).apply(void 0,R([],P(e)))},clearTimeout:function(e){var o=z.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ce(e){z.setTimeout(function(){var o=A.onUnhandledError;if(o)o(e);else throw e})}function Q(){}var br=function(){return Ie("C",void 0,void 0)}();function hr(e){return Ie("E",void 0,e)}function yr(e){return Ie("N",e,void 0)}function Ie(e,o,r){return{kind:e,value:o,error:r}}var W=null;function q(e){if(A.useDeprecatedSynchronousErrorHandling){var o=!W;if(o&&(W={errorThrown:!1,error:null}),e(),o){var r=W,t=r.errorThrown,n=r.error;if(W=null,t)throw n}}else e()}function xr(e){A.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=e)}var j=function(e){O(o,e);function o(r){var t=e.call(this)||this;return t.isStopped=!1,r?(t.destination=r,se(r)&&r.add(t)):t.destination=At,t}return o.create=function(r,t,n){return new fe(r,t,n)},o.prototype.next=function(r){this.isStopped?Re(yr(r),this):this._next(r)},o.prototype.error=function(r){this.isStopped?Re(hr(r),this):(this.isStopped=!0,this._error(r))},o.prototype.complete=function(){this.isStopped?Re(br,this):(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},o.prototype._next=function(r){this.destination.next(r)},o.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},o.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},o}(L);var fe=function(e){O(o,e);function o(r,t,n){var i=e.call(this)||this,a;if(m(r))a=r;else if(r){a=r.next,t=r.error,n=r.complete;var s;i&&A.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return i.unsubscribe()}):s=r,a=a==null?void 0:a.bind(s),t=t==null?void 0:t.bind(s),n=n==null?void 0:n.bind(s)}return i.destination={next:a?Pe(a,i):Q,error:Pe(t!=null?t:_r,i),complete:n?Pe(n,i):Q},i}return o}(j);function Pe(e,o){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];try{e.apply(void 0,R([],P(r)))}catch(n){A.useDeprecatedSynchronousErrorHandling?xr(n):ce(n)}}}function _r(e){throw e}function Re(e,o){var r=A.onStoppedNotification;r&&z.setTimeout(function(){return r(e,o)})}var At={closed:!0,next:Q,error:_r,complete:Q};var B=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function k(e){return e}function gr(e){return e.length===0?k:e.length===1?e[0]:function(r){return e.reduce(function(t,n){return n(t)},r)}}var h=function(){function e(o){o&&(this._subscribe=o)}return e.prototype.lift=function(o){var r=new e;return r.source=this,r.operator=o,r},e.prototype.subscribe=function(o,r,t){var n=this,i=Pt(o)?o:new fe(o,r,t);return q(function(){var a=n,s=a.operator,u=a.source;i.add(s?s.call(i,u):u?n._subscribe(i):n._trySubscribe(i))}),i},e.prototype._trySubscribe=function(o){try{return this._subscribe(o)}catch(r){o.error(r)}},e.prototype.forEach=function(o,r){var t=this;return r=Sr(r),new r(function(n,i){var a=new fe({next:function(s){try{o(s)}catch(u){i(u),a.unsubscribe()}},error:i,complete:n});t.subscribe(a)})},e.prototype._subscribe=function(o){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(o)},e.prototype[B]=function(){return this},e.prototype.pipe=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return gr(o)(this)},e.prototype.toPromise=function(o){var r=this;return o=Sr(o),new o(function(t,n){var i;r.subscribe(function(a){return i=a},function(a){return n(a)},function(){return t(i)})})},e.create=function(o){return new e(o)},e}();function Sr(e){var o;return(o=e!=null?e:A.Promise)!==null&&o!==void 0?o:Promise}function It(e){return e&&m(e.next)&&m(e.error)&&m(e.complete)}function Pt(e){return e&&e instanceof j||It(e)&&se(e)}function Rt(e){return m(e==null?void 0:e.lift)}function y(e){return function(o){if(Rt(o))return o.lift(function(r){try{return e(r,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}var x=function(e){O(o,e);function o(r,t,n,i,a){var s=e.call(this,r)||this;return s.onFinalize=a,s._next=t?function(u){try{t(u)}catch(c){r.error(c)}}:e.prototype._next,s._error=i?function(u){try{i(u)}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,s}return o.prototype.unsubscribe=function(){var r,t=this.closed;e.prototype.unsubscribe.call(this),!t&&((r=this.onFinalize)===null||r===void 0||r.call(this))},o}(j);var wr=ae(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Y=function(e){O(o,e);function o(){var r=e.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return o.prototype.lift=function(r){var t=new pe(this,this);return t.operator=r,t},o.prototype._throwIfClosed=function(){if(this.closed)throw new wr},o.prototype.next=function(r){var t=this;q(function(){var n,i;if(t._throwIfClosed(),!t.isStopped){var a=t.observers.slice();try{for(var s=N(a),u=s.next();!u.done;u=s.next()){var c=u.value;c.next(r)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}})},o.prototype.error=function(r){var t=this;q(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=r;for(var n=t.observers;n.length;)n.shift().error(r)}})},o.prototype.complete=function(){var r=this;q(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var t=r.observers;t.length;)t.shift().complete()}})},o.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(o.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),o.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},o.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},o.prototype._innerSubscribe=function(r){var t=this,n=t.hasError,i=t.isStopped,a=t.observers;return n||i?Ae:(a.push(r),new L(function(){return $(a,r)}))},o.prototype._checkFinalizedStatuses=function(r){var t=this,n=t.hasError,i=t.thrownError,a=t.isStopped;n?r.error(i):a&&r.complete()},o.prototype.asObservable=function(){var r=new h;return r.source=this,r},o.create=function(r,t){return new pe(r,t)},o}(h);var pe=function(e){O(o,e);function o(r,t){var n=e.call(this)||this;return n.destination=r,n.source=t,n}return o.prototype.next=function(r){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,r)},o.prototype.error=function(r){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,r)},o.prototype.complete=function(){var r,t;(t=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||t===void 0||t.call(r)},o.prototype._subscribe=function(r){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(r))!==null&&n!==void 0?n:Ae},o}(Y);var ke={now:function(){return(ke.delegate||Date).now()},delegate:void 0};var le=function(e){O(o,e);function o(r,t,n){r===void 0&&(r=1/0),t===void 0&&(t=1/0),n===void 0&&(n=ke);var i=e.call(this)||this;return i._bufferSize=r,i._windowTime=t,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=t===1/0,i._bufferSize=Math.max(1,r),i._windowTime=Math.max(1,t),i}return o.prototype.next=function(r){var t=this,n=t.isStopped,i=t._buffer,a=t._infiniteTimeWindow,s=t._timestampProvider,u=t._windowTime;n||(i.push(r),!a&&i.push(s.now()+u)),this._trimBuffer(),e.prototype.next.call(this,r)},o.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(r),n=this,i=n._infiniteTimeWindow,a=n._buffer,s=a.slice(),u=0;u<s.length&&!r.closed;u+=i?1:2)r.next(s[u]);return this._checkFinalizedStatuses(r),t},o.prototype._trimBuffer=function(){var r=this,t=r._bufferSize,n=r._timestampProvider,i=r._buffer,a=r._infiniteTimeWindow,s=(a?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var u=n.now(),c=0,p=1;p<i.length&&i[p]<=u;p+=2)c=p;c&&i.splice(0,c+1)}},o}(Y);var Or=new h(function(e){return e.complete()});function Er(e){return e&&m(e.schedule)}function Tr(e){return e[e.length-1]}function Ar(e){return m(Tr(e))?e.pop():void 0}function C(e){return Er(Tr(e))?e.pop():void 0}var me=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function de(e){return m(e==null?void 0:e.then)}function ve(e){return m(e[B])}function be(e){return Symbol.asyncIterator&&m(e==null?void 0:e[Symbol.asyncIterator])}function he(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function kt(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ye=kt();function xe(e){return m(e==null?void 0:e[ye])}function _e(e){return mr(this,arguments,function(){var r,t,n,i;return ne(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ie(r.read())];case 3:return t=a.sent(),n=t.value,i=t.done,i?[4,ie(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ie(n)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function ge(e){return m(e==null?void 0:e.getReader)}function E(e){if(e instanceof h)return e;if(e!=null){if(ve(e))return Lt(e);if(me(e))return Ct(e);if(de(e))return Dt(e);if(be(e))return Ir(e);if(xe(e))return Nt(e);if(ge(e))return Wt(e)}throw he(e)}function Lt(e){return new h(function(o){var r=e[B]();if(m(r.subscribe))return r.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ct(e){return new h(function(o){for(var r=0;r<e.length&&!o.closed;r++)o.next(e[r]);o.complete()})}function Dt(e){return new h(function(o){e.then(function(r){o.closed||(o.next(r),o.complete())},function(r){return o.error(r)}).then(null,ce)})}function Nt(e){return new h(function(o){var r,t;try{for(var n=N(e),i=n.next();!i.done;i=n.next()){var a=i.value;if(o.next(a),o.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}o.complete()})}function Ir(e){return new h(function(o){jt(e,o).catch(function(r){return o.error(r)})})}function Wt(e){return Ir(_e(e))}function jt(e,o){var r,t,n,i;return lr(this,void 0,void 0,function(){var a,s;return ne(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=dr(e),u.label=1;case 1:return[4,r.next()];case 2:if(t=u.sent(),!!t.done)return[3,4];if(a=t.value,o.next(a),o.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),n={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),t&&!t.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return o.complete(),[2]}})})}function w(e,o,r,t,n){t===void 0&&(t=0),n===void 0&&(n=!1);var i=o.schedule(function(){r(),n?e.add(this.schedule(null,t)):this.unsubscribe()},t);if(e.add(i),!n)return i}function Se(e,o){return o===void 0&&(o=0),y(function(r,t){r.subscribe(new x(t,function(n){return w(t,e,function(){return t.next(n)},o)},function(){return w(t,e,function(){return t.complete()},o)},function(n){return w(t,e,function(){return t.error(n)},o)}))})}function we(e,o){return o===void 0&&(o=0),y(function(r,t){t.add(e.schedule(function(){return r.subscribe(t)},o))})}function Pr(e,o){return E(e).pipe(we(o),Se(o))}function Rr(e,o){return E(e).pipe(we(o),Se(o))}function kr(e,o){return new h(function(r){var t=0;return o.schedule(function(){t===e.length?r.complete():(r.next(e[t++]),r.closed||this.schedule())})})}function Lr(e,o){return new h(function(r){var t;return w(r,o,function(){t=e[ye](),w(r,o,function(){var n,i,a;try{n=t.next(),i=n.value,a=n.done}catch(s){r.error(s);return}a?r.complete():r.next(i)},0,!0)}),function(){return m(t==null?void 0:t.return)&&t.return()}})}function Oe(e,o){if(!e)throw new Error("Iterable cannot be null");return new h(function(r){w(r,o,function(){var t=e[Symbol.asyncIterator]();w(r,o,function(){t.next().then(function(n){n.done?r.complete():r.next(n.value)})},0,!0)})})}function Cr(e,o){return Oe(_e(e),o)}function Dr(e,o){if(e!=null){if(ve(e))return Pr(e,o);if(me(e))return kr(e,o);if(de(e))return Rr(e,o);if(be(e))return Oe(e,o);if(xe(e))return Lr(e,o);if(ge(e))return Cr(e,o)}throw he(e)}function M(e,o){return o?Dr(e,o):E(e)}function Le(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var r=C(e);return M(e,r)}function F(e,o){return y(function(r,t){var n=0;r.subscribe(new x(t,function(i){t.next(e.call(o,i,n++))}))})}var Mt=Array.isArray;function Ft(e,o){return Mt(o)?e.apply(void 0,R([],P(o))):e(o)}function Nr(e){return F(function(o){return Ft(e,o)})}var Ut=Array.isArray,Gt=Object.getPrototypeOf,Vt=Object.prototype,zt=Object.keys;function Wr(e){if(e.length===1){var o=e[0];if(Ut(o))return{args:o,keys:null};if(qt(o)){var r=zt(o);return{args:r.map(function(t){return o[t]}),keys:r}}}return{args:e,keys:null}}function qt(e){return e&&typeof e=="object"&&Gt(e)===Vt}function jr(e,o){return e.reduce(function(r,t,n){return r[t]=o[n],r},{})}function Ce(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var r=C(e),t=Ar(e),n=Wr(e),i=n.args,a=n.keys;if(i.length===0)return M([],r);var s=new h(Bt(i,r,a?function(u){return jr(a,u)}:k));return t?s.pipe(Nr(t)):s}function Bt(e,o,r){return r===void 0&&(r=k),function(t){Mr(o,function(){for(var n=e.length,i=new Array(n),a=n,s=n,u=function(p){Mr(o,function(){var d=M(e[p],o),f=!1;d.subscribe(new x(t,function(v){i[p]=v,f||(f=!0,s--),s||t.next(r(i.slice()))},function(){--a||t.complete()}))},t)},c=0;c<n;c++)u(c)},t)}}function Mr(e,o,r){e?w(r,e,o):o()}function Fr(e,o,r,t,n,i,a,s){var u=[],c=0,p=0,d=!1,f=function(){d&&!u.length&&!c&&o.complete()},v=function(l){return c<t?g(l):u.push(l)},g=function(l){i&&o.next(l),c++;var S=!1;E(r(l,p++)).subscribe(new x(o,function(T){n==null||n(T),i?v(T):o.next(T)},function(){S=!0},void 0,function(){if(S)try{c--;for(var T=function(){var G=u.shift();a?w(o,a,function(){return g(G)}):g(G)};u.length&&c<t;)T();f()}catch(G){o.error(G)}}))};return e.subscribe(new x(o,v,function(){d=!0,f()})),function(){s==null||s()}}function De(e,o,r){return r===void 0&&(r=1/0),m(o)?De(function(t,n){return F(function(i,a){return o(t,i,n,a)})(E(e(t,n)))},r):(typeof o=="number"&&(r=o),y(function(t,n){return Fr(t,n,e,r)}))}function Ur(e){return e===void 0&&(e=1/0),De(k,e)}function Gr(){return Ur(1)}function Ne(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return Gr()(M(e,C(e)))}function D(e,o){return y(function(r,t){var n=0;r.subscribe(new x(t,function(i){return e.call(o,i,n++)&&t.next(i)}))})}function H(e){return e<=0?function(){return Or}:y(function(o,r){var t=0;o.subscribe(new x(r,function(n){++t<=e&&(r.next(n),e<=t&&r.complete())}))})}function We(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var r=C(e);return y(function(t,n){(r?Ne(e,t,r):Ne(e,t)).subscribe(n)})}function K(e,o){return y(function(r,t){var n=null,i=0,a=!1,s=function(){return a&&!n&&t.complete()};r.subscribe(new x(t,function(u){n==null||n.unsubscribe();var c=0,p=i++;E(e(u,p)).subscribe(n=new x(t,function(d){return t.next(o?o(u,d,p,c++):d)},function(){n=null,s()}))},function(){a=!0,s()}))})}function J(e,o,r){var t=m(e)||o||r?{next:e,error:o,complete:r}:e;return t?y(function(n,i){var a;(a=t.subscribe)===null||a===void 0||a.call(t);var s=!0;n.subscribe(new x(i,function(u){var c;(c=t.next)===null||c===void 0||c.call(t,u),i.next(u)},function(){var u;s=!1,(u=t.complete)===null||u===void 0||u.call(t),i.complete()},function(u){var c;s=!1,(c=t.error)===null||c===void 0||c.call(t,u),i.error(u)},function(){var u,c;s&&((u=t.unsubscribe)===null||u===void 0||u.call(t)),(c=t.finalize)===null||c===void 0||c.call(t)}))}):k}var Yt={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},Ht="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",Vr=function(e){O(o,e);function o(r,t){var n=e.call(this)||this;if(n._socket=null,r instanceof h)n.destination=t,n.source=r;else{var i=n._config=pr({},Yt);if(n._output=new Y,typeof r=="string")i.url=r;else for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");n.destination=new le}return n}return o.prototype.lift=function(r){var t=new o(this._config,this.destination);return t.operator=r,t.source=this,t},o.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new le),this._output=new Y},o.prototype.multiplex=function(r,t,n){var i=this;return new h(function(a){try{i.next(r())}catch(u){a.error(u)}var s=i.subscribe(function(u){try{n(u)&&a.next(u)}catch(c){a.error(c)}},function(u){return a.error(u)},function(){return a.complete()});return function(){try{i.next(t())}catch(u){a.error(u)}s.unsubscribe()}})},o.prototype._connectSocket=function(){var r=this,t=this._config,n=t.WebSocketCtor,i=t.protocol,a=t.url,s=t.binaryType,u=this._output,c=null;try{c=i?new n(a,i):new n(a),this._socket=c,s&&(this._socket.binaryType=s)}catch(d){u.error(d);return}var p=new L(function(){r._socket=null,c&&c.readyState===1&&c.close()});c.onopen=function(d){var f=r._socket;if(!f){c.close(),r._resetState();return}var v=r._config.openObserver;v&&v.next(d);var g=r.destination;r.destination=j.create(function(l){if(c.readyState===1)try{var S=r._config.serializer;c.send(S(l))}catch(T){r.destination.error(T)}},function(l){var S=r._config.closingObserver;S&&S.next(void 0),l&&l.code?c.close(l.code,l.reason):u.error(new TypeError(Ht)),r._resetState()},function(){var l=r._config.closingObserver;l&&l.next(void 0),c.close(),r._resetState()}),g&&g instanceof le&&p.add(g.subscribe(r.destination))},c.onerror=function(d){r._resetState(),u.error(d)},c.onclose=function(d){c===r._socket&&r._resetState();var f=r._config.closeObserver;f&&f.next(d),d.wasClean?u.complete():u.error(d)},c.onmessage=function(d){try{var f=r._config.deserializer;u.next(f(d))}catch(v){u.error(v)}}},o.prototype._subscribe=function(r){var t=this,n=this.source;return n?n.subscribe(r):(this._socket||this._connectSocket(),this._output.subscribe(r),r.add(function(){var i=t._socket;t._output.observers.length===0&&(i&&(i.readyState===1||i.readyState===0)&&i.close(),t._resetState())}),r)},o.prototype.unsubscribe=function(){var r=this._socket;r&&(r.readyState===1||r.readyState===0)&&r.close(),this._resetState(),e.prototype.unsubscribe.call(this)},o}(pe);function X(e){return new Vr(e)}function je(e){return e.event==="willAppear"}function zr(e){return e.event==="willDisappear"}function qr(e){return e.event==="didReceiveGlobalSettings"}function Br(e){return e.event==="keyUp"}function Yr(e){return e.id==="status"}function Hr(e){return e.id==="program"}function Kr(e){return e.id==="volume"}function Jr(e,o){return{event:e,uuid:o}}function Xr(e,o,r=0){return{event:"setImage",context:e.context,payload:{image:o,target:0,state:r}}}function Zr(e,o){return{event:"setGlobalSettings",context:e,payload:o}}function $r(e,o){return{event:"setSettings",context:e,payload:o}}function Qr(e,o){return{action:e.action,event:"setState",context:e.context,payload:{state:o}}}var U=0;function et(){return{id:`volumedown_${U++}`,type:"request",uri:"ssap://audio/volumeDown"}}function rt(){return{id:`volumeup_${U++}`,type:"request",uri:"ssap://audio/volumeUp"}}function tt(e){return{id:`volumeup_${U++}`,type:"request",uri:"ssap://audio/setMute",payload:{mute:e}}}function ot(e){return{id:`volumeup_${U++}`,type:"request",uri:"ssap://audio/setVolume",payload:{volume:e}}}function nt(){return{id:`volumedown_${U++}`,type:"request",uri:"ssap://tv/channelUp"}}function it(){return{id:`volumedown_${U++}`,type:"request",uri:"ssap://tv/channelDown"}}function at(e){return{id:`channel_${U++}`,type:"request",uri:"ssap://tv/openChannel",payload:{channelId:e}}}function ut(){return`type:button
name:ENTER

`}function st(e){return`type:button
name:${e}

`}function ct(){return`type:button
name:BACK

`}function ft(e){return{event:"getGlobalSettings",context:e}}var Kt="register",Jt="register_0",Xt={forcePairing:!1,pairingType:"PROMPT","client-key":"0aa74766b754a07e334b50d240c3ca55",manifest:{manifestVersion:1,appVersion:"1.1",signed:{created:"20140509",appId:"com.lge.test",vendorId:"com.lge",localizedAppNames:{"":"LG Remote App","ko-KR":"\uB9AC\uBAA8\uCEE8 \uC571","zxx-XX":"\u041B\u0413 R\u044D\u043Cot\u044D A\u041F\u041F"},localizedVendorNames:{"":"LG Electronics"},permissions:["TEST_SECURE","CONTROL_INPUT_TEXT","CONTROL_MOUSE_AND_KEYBOARD","READ_INSTALLED_APPS","READ_LGE_SDX","READ_NOTIFICATIONS","SEARCH","WRITE_SETTINGS","WRITE_NOTIFICATION_ALERT","CONTROL_POWER","READ_CURRENT_CHANNEL","READ_RUNNING_APPS","READ_UPDATE_INFO","UPDATE_FROM_REMOTE_APP","READ_LGE_TV_INPUT_EVENTS","READ_TV_CURRENT_TIME"],serial:"2f930e2d2cfe083771f68e4fe7bb07"},permissions:["LAUNCH","LAUNCH_WEBAPP","APP_TO_APP","CLOSE","TEST_OPEN","TEST_PROTECTED","CONTROL_AUDIO","CONTROL_DISPLAY","CONTROL_INPUT_JOYSTICK","CONTROL_INPUT_MEDIA_RECORDING","CONTROL_INPUT_MEDIA_PLAYBACK","CONTROL_INPUT_TV","CONTROL_POWER","READ_APP_STATUS","READ_CURRENT_CHANNEL","READ_INPUT_DEVICE_LIST","READ_NETWORK_STATE","READ_RUNNING_APPS","READ_TV_CHANNEL_LIST","WRITE_NOTIFICATION_TOAST","READ_POWER_STATE","READ_COUNTRY_INFO"],signatures:[{signatureVersion:1,signature:"eyJhbGdvcml0aG0iOiJSU0EtU0hBMjU2Iiwia2V5SWQiOiJ0ZXN0LXNpZ25pbmctY2VydCIsInNpZ25hdHVyZVZlcnNpb24iOjF9.hrVRgjCwXVvE2OOSpDZ58hR+59aFNwYDyjQgKk3auukd7pcegmE2CzPCa0bJ0ZsRAcKkCTJrWo5iDzNhMBWRyaMOv5zWSrthlf7G128qvIlpMT0YNY+n/FaOHE73uLrS/g7swl3/qH/BGFG2Hu4RlL48eb3lLKqTt2xKHdCs6Cd4RMfJPYnzgvI4BNrFUKsjkcu+WD4OO2A27Pq1n50cMchmcaXadJhGrOqH5YmHdOCj5NSHzJYrsW0HPlpuAx/ECMeIZYDh6RMqaFM2DXzdKX9NmmyqzJ3o/0lkk/N97gfVRLW5hA29yeAwaCViZNCP8iC9aO0q9fQojoa7NQnAtw=="}]}},pt={type:Kt,id:Jt,payload:Xt};var b=null,I=null;function lt(e){if(b)return Le(b);let o=!0;return setTimeout(()=>{var r;(r=_)==null||r.next(ft(e))}),_.pipe(D(qr),D(r=>!!r),H(1),F(r=>{let t=typeof r!="string"&&(r==null?void 0:r.payload.settings.url);return b=X(t||"ws://192.168.0.13:3000"),r}),K(r=>{let t=pt;return typeof r!="string"&&(r==null?void 0:r.payload.settings.key)&&(t.payload["client-key"]=r==null?void 0:r.payload.settings.key),b==null||b.next(t),b}),J(r=>{var t;!r.payload["client-key"]||(t=_)==null||t.next(Zr(e,{key:r.payload["client-key"]}))}),J(r=>{!o||(o=!1,b==null||b.next({id:"pointer_1",type:"request",uri:"ssap://com.webos.service.networkinput/getPointerInputSocket"}),b==null||b.next({id:"status",type:"subscribe",uri:"ssap://audio/getMute"}),b==null||b.next({id:"volume",type:"subscribe",uri:"ssap://audio/getVolume"}),b==null||b.next({id:"program",type:"subscribe",uri:"ssap://tv/getChannelCurrentProgramInfo"}))}))}function mt(){return I||b.pipe(D(e=>e.id==="pointer_1"),H(1),K(e=>(I=X({url:e.payload.socketPath,serializer:o=>o}),I)))}function dt(){I==null||I.unsubscribe(),I=null,b==null||b.unsubscribe(),b=null}var _=null,Z={volume:null,program:null};function Zt(e,o,r){_=X(`ws://127.0.0.1:${e}`);let t=[],n;_.pipe(D(Br),J(i=>{var p,d;let a={"eu.stumpa.telka.volume_down":et(),"eu.stumpa.telka.volume_up":rt(),"eu.stumpa.telka.channel_down":it(),"eu.stumpa.telka.channel_up":nt(),"eu.stumpa.telka.mute":tt(!i.payload.state),"eu.stumpa.telka.setvolume":ot(i.payload.settings.volume),"eu.stumpa.telka.setchannel":at(i.payload.settings.channel)},s={"eu.stumpa.telka.channel":st(i.payload.settings.button),"eu.stumpa.telka.enter":ut(),"eu.stumpa.telka.back":ct()},u=a[i.action],c=s[i.action];u&&((p=b)==null||p.next(u)),c&&((d=I)==null||d.next(c))})).subscribe(),_.pipe(D(i=>je(i)||zr(i))).subscribe(i=>{if(je(i)){if(t.push(i),t.length===1){let a=lt(o).pipe(H(1),K(()=>Ce([b,mt().pipe(We(null))]))).subscribe(([s])=>{if(Yr(s)){let u=t.find(c=>c.action==="eu.stumpa.telka.mute");if(!u)return;_==null||_.next(Qr(u,+s.payload.mute))}else if(Hr(s)){let u=t.find(c=>c.action==="eu.stumpa.telka.info");if(!u)return;_==null||_.next($r(u.context,Ve(Ge({},u.payload.settings),{channelId:s.payload.channelId}))),Z.program=s,vt(u)}else if(Kr(s)){let u=t.find(c=>c.action==="eu.stumpa.telka.info");if(!u)return;Z.volume=s,vt(u)}});n==null||n.add(a)}}else t=t.filter(a=>a.action===i.action),t.length||(n==null||n.unsubscribe(),dt())}),_.next(Jr(r,o))}function vt(e){var n,i,a,s;let o=document.createElement("canvas");o.width=144,o.height=144;let r=o.getContext("2d");r.font="25px Arial",r.fillStyle="#FFF",r.fillText(((n=Z.volume)==null?void 0:n.payload.volume.toString())||"?",15,27),r.fillText(((i=Z.program)==null?void 0:i.payload.channelName)||"",15,50),r.fillText(((a=Z.program)==null?void 0:a.payload.programName.toString())||"?",15,75),r.fillText(((s=Z.program)==null?void 0:s.payload.localEndTime.split(",").splice(3,2).join(":").toString())||"?",15,100);let t=o.toDataURL();_==null||_.next(Xr(e,t))}window.connectElgatoStreamDeckSocket=Zt;})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
